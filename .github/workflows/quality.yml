name: Quality

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  quality:
    runs-on: macos-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup Swift
      uses: swift-actions/setup-swift@v1
      with:
        swift-version: 6.2
    
    - name: Install dependencies
      run: swift package resolve
    
    - name: Run SwiftLint
      run: |
        swiftlint lint Sources/
    
    - name: Run SwiftFormat
      run: |
        swiftformat --in-place --recursive Sources/
    
    - name: Check for vulnerabilities
      run: |
        swift package audit
    
    - name: Generate documentation
      run: |
        swift package generate-documentation
